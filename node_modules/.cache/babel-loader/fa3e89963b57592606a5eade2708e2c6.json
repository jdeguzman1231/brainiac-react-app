{"ast":null,"code":"/*\r\n    Deprecated Decorator v0.1\r\n    https://github.com/vilic/deprecated-decorator\r\n*/\n\"use strict\";\n/** @internal */\n\nexports.options = {\n  getWarner: undefined\n};\n\nfunction createWarner(type, name, alternative, version, url) {\n  var warnedPositions = {};\n  return function () {\n    var stack = new Error().stack || '';\n    var at = (stack.match(/(?:\\s+at\\s.+){2}\\s+at\\s(.+)/) || [undefined, ''])[1];\n\n    if (/\\)$/.test(at)) {\n      at = at.match(/[^(]+(?=\\)$)/)[0];\n    } else {\n      at = at.trim();\n    }\n\n    if (at in warnedPositions) {\n      return;\n    }\n\n    warnedPositions[at] = true;\n    var message;\n\n    switch (type) {\n      case 'class':\n        message = 'Class';\n        break;\n\n      case 'property':\n        message = 'Property';\n        break;\n\n      case 'method':\n        message = 'Method';\n        break;\n\n      case 'function':\n        message = 'Function';\n        break;\n    }\n\n    message += \" `\" + name + \"` has been deprecated\";\n\n    if (version) {\n      message += \" since version \" + version;\n    }\n\n    if (alternative) {\n      message += \", use `\" + alternative + \"` instead\";\n    }\n\n    message += '.';\n\n    if (at) {\n      message += \"\\n    at \" + at;\n    }\n\n    if (url) {\n      message += \"\\nCheck out \" + url + \" for more information.\";\n    }\n\n    console.warn(message);\n  };\n}\n\nfunction decorateProperty(type, name, descriptor, alternative, version, url) {\n  var warner = (exports.options.getWarner || createWarner)(type, name, alternative, version, url);\n  descriptor = descriptor || {\n    writable: true,\n    enumerable: false,\n    configurable: true\n  };\n  var deprecatedDescriptor = {\n    enumerable: descriptor.enumerable,\n    configurable: descriptor.configurable\n  };\n\n  if (descriptor.get || descriptor.set) {\n    if (descriptor.get) {\n      deprecatedDescriptor.get = function () {\n        warner();\n        return descriptor.get.call(this);\n      };\n    }\n\n    if (descriptor.set) {\n      deprecatedDescriptor.set = function (value) {\n        warner();\n        return descriptor.set.call(this, value);\n      };\n    }\n  } else {\n    var propertyValue_1 = descriptor.value;\n\n    deprecatedDescriptor.get = function () {\n      warner();\n      return propertyValue_1;\n    };\n\n    if (descriptor.writable) {\n      deprecatedDescriptor.set = function (value) {\n        warner();\n        propertyValue_1 = value;\n      };\n    }\n  }\n\n  return deprecatedDescriptor;\n}\n\nfunction decorateFunction(type, target, alternative, version, url) {\n  var name = target.name;\n  var warner = (exports.options.getWarner || createWarner)(type, name, alternative, version, url);\n\n  var fn = function () {\n    warner();\n    return target.apply(this, arguments);\n  };\n\n  for (var _i = 0, _a = Object.getOwnPropertyNames(target); _i < _a.length; _i++) {\n    var propertyName = _a[_i];\n    var descriptor = Object.getOwnPropertyDescriptor(target, propertyName);\n\n    if (descriptor.writable) {\n      fn[propertyName] = target[propertyName];\n    } else if (descriptor.configurable) {\n      Object.defineProperty(fn, propertyName, descriptor);\n    }\n  }\n\n  return fn;\n}\n\nfunction deprecated() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i - 0] = arguments[_i];\n  }\n\n  var fn = args[args.length - 1];\n\n  if (typeof fn === 'function') {\n    fn = args.pop();\n  } else {\n    fn = undefined;\n  }\n\n  var options = args[0];\n  var alternative;\n  var version;\n  var url;\n\n  if (typeof options === 'string') {\n    alternative = options;\n    version = args[1];\n    url = args[2];\n  } else if (options) {\n    alternative = options.alternative, version = options.version, url = options.url, options;\n  }\n\n  if (fn) {\n    return decorateFunction('function', fn, alternative, version, url);\n  }\n\n  return function (target, name, descriptor) {\n    if (typeof name === 'string') {\n      var type = descriptor && typeof descriptor.value === 'function' ? 'method' : 'property';\n      return decorateProperty(type, name, descriptor, alternative, version, url);\n    } else if (typeof target === 'function') {\n      var constructor = decorateFunction('class', target, alternative, version, url);\n      var className = target.name;\n\n      for (var _i = 0, _a = Object.getOwnPropertyNames(constructor); _i < _a.length; _i++) {\n        var propertyName = _a[_i];\n        var descriptor_1 = Object.getOwnPropertyDescriptor(constructor, propertyName);\n        descriptor_1 = decorateProperty('class', className, descriptor_1, alternative, version, url);\n\n        if (descriptor_1.writable) {\n          constructor[propertyName] = target[propertyName];\n        } else if (descriptor_1.configurable) {\n          Object.defineProperty(constructor, propertyName, descriptor_1);\n        }\n      }\n\n      return constructor;\n    }\n  };\n}\n\nexports.deprecated = deprecated;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = deprecated;","map":{"version":3,"sources":["index.ts"],"names":[],"mappings":"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","sourceRoot":"c:/Projects/decorators/deprecated/src/","sourcesContent":["/*\r\n    Deprecated Decorator v0.1\r\n    https://github.com/vilic/deprecated-decorator\r\n*/\r\n\"use strict\";\r\n/** @internal */\r\nexports.options = {\r\n    getWarner: undefined\r\n};\r\nfunction createWarner(type, name, alternative, version, url) {\r\n    var warnedPositions = {};\r\n    return function () {\r\n        var stack = (new Error()).stack || '';\r\n        var at = (stack.match(/(?:\\s+at\\s.+){2}\\s+at\\s(.+)/) || [undefined, ''])[1];\r\n        if (/\\)$/.test(at)) {\r\n            at = at.match(/[^(]+(?=\\)$)/)[0];\r\n        }\r\n        else {\r\n            at = at.trim();\r\n        }\r\n        if (at in warnedPositions) {\r\n            return;\r\n        }\r\n        warnedPositions[at] = true;\r\n        var message;\r\n        switch (type) {\r\n            case 'class':\r\n                message = 'Class';\r\n                break;\r\n            case 'property':\r\n                message = 'Property';\r\n                break;\r\n            case 'method':\r\n                message = 'Method';\r\n                break;\r\n            case 'function':\r\n                message = 'Function';\r\n                break;\r\n        }\r\n        message += \" `\" + name + \"` has been deprecated\";\r\n        if (version) {\r\n            message += \" since version \" + version;\r\n        }\r\n        if (alternative) {\r\n            message += \", use `\" + alternative + \"` instead\";\r\n        }\r\n        message += '.';\r\n        if (at) {\r\n            message += \"\\n    at \" + at;\r\n        }\r\n        if (url) {\r\n            message += \"\\nCheck out \" + url + \" for more information.\";\r\n        }\r\n        console.warn(message);\r\n    };\r\n}\r\nfunction decorateProperty(type, name, descriptor, alternative, version, url) {\r\n    var warner = (exports.options.getWarner || createWarner)(type, name, alternative, version, url);\r\n    descriptor = descriptor || {\r\n        writable: true,\r\n        enumerable: false,\r\n        configurable: true\r\n    };\r\n    var deprecatedDescriptor = {\r\n        enumerable: descriptor.enumerable,\r\n        configurable: descriptor.configurable\r\n    };\r\n    if (descriptor.get || descriptor.set) {\r\n        if (descriptor.get) {\r\n            deprecatedDescriptor.get = function () {\r\n                warner();\r\n                return descriptor.get.call(this);\r\n            };\r\n        }\r\n        if (descriptor.set) {\r\n            deprecatedDescriptor.set = function (value) {\r\n                warner();\r\n                return descriptor.set.call(this, value);\r\n            };\r\n        }\r\n    }\r\n    else {\r\n        var propertyValue_1 = descriptor.value;\r\n        deprecatedDescriptor.get = function () {\r\n            warner();\r\n            return propertyValue_1;\r\n        };\r\n        if (descriptor.writable) {\r\n            deprecatedDescriptor.set = function (value) {\r\n                warner();\r\n                propertyValue_1 = value;\r\n            };\r\n        }\r\n    }\r\n    return deprecatedDescriptor;\r\n}\r\nfunction decorateFunction(type, target, alternative, version, url) {\r\n    var name = target.name;\r\n    var warner = (exports.options.getWarner || createWarner)(type, name, alternative, version, url);\r\n    var fn = function () {\r\n        warner();\r\n        return target.apply(this, arguments);\r\n    };\r\n    for (var _i = 0, _a = Object.getOwnPropertyNames(target); _i < _a.length; _i++) {\r\n        var propertyName = _a[_i];\r\n        var descriptor = Object.getOwnPropertyDescriptor(target, propertyName);\r\n        if (descriptor.writable) {\r\n            fn[propertyName] = target[propertyName];\r\n        }\r\n        else if (descriptor.configurable) {\r\n            Object.defineProperty(fn, propertyName, descriptor);\r\n        }\r\n    }\r\n    return fn;\r\n}\r\nfunction deprecated() {\r\n    var args = [];\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n        args[_i - 0] = arguments[_i];\r\n    }\r\n    var fn = args[args.length - 1];\r\n    if (typeof fn === 'function') {\r\n        fn = args.pop();\r\n    }\r\n    else {\r\n        fn = undefined;\r\n    }\r\n    var options = args[0];\r\n    var alternative;\r\n    var version;\r\n    var url;\r\n    if (typeof options === 'string') {\r\n        alternative = options;\r\n        version = args[1];\r\n        url = args[2];\r\n    }\r\n    else if (options) {\r\n        (alternative = options.alternative, version = options.version, url = options.url, options);\r\n    }\r\n    if (fn) {\r\n        return decorateFunction('function', fn, alternative, version, url);\r\n    }\r\n    return function (target, name, descriptor) {\r\n        if (typeof name === 'string') {\r\n            var type = descriptor && typeof descriptor.value === 'function' ?\r\n                'method' : 'property';\r\n            return decorateProperty(type, name, descriptor, alternative, version, url);\r\n        }\r\n        else if (typeof target === 'function') {\r\n            var constructor = decorateFunction('class', target, alternative, version, url);\r\n            var className = target.name;\r\n            for (var _i = 0, _a = Object.getOwnPropertyNames(constructor); _i < _a.length; _i++) {\r\n                var propertyName = _a[_i];\r\n                var descriptor_1 = Object.getOwnPropertyDescriptor(constructor, propertyName);\r\n                descriptor_1 = decorateProperty('class', className, descriptor_1, alternative, version, url);\r\n                if (descriptor_1.writable) {\r\n                    constructor[propertyName] = target[propertyName];\r\n                }\r\n                else if (descriptor_1.configurable) {\r\n                    Object.defineProperty(constructor, propertyName, descriptor_1);\r\n                }\r\n            }\r\n            return constructor;\r\n        }\r\n    };\r\n}\r\nexports.deprecated = deprecated;\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.default = deprecated;\r\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}