{"ast":null,"code":"var _jsxFileName = \"/Users/darrenjiang/Desktop/brainiac Client/src/pages/LoginPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useState } from 'react';\nimport { Form, Button, Modal } from 'react-bootstrap';\nimport { useMutation } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport { AuthContext } from '../context/auth';\nimport { useForm } from '../util/hooks';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction LoginPage(props) {\n  _s();\n\n  const context = useContext(AuthContext);\n  const [errors, setErrors] = useState({});\n  const [valid, validate] = useState(false);\n  const {\n    handleChange,\n    onSubmit,\n    values\n  } = useForm(loginUserCallback, {\n    email: '',\n    password: ''\n  });\n\n  const handleClose = () => validate(false);\n\n  const handleShow = () => validate(true);\n\n  const [loginUser, {\n    loading\n  }] = useMutation(LOGIN_USER, {\n    update(proxy, result) {\n      console.log(result);\n      context.login(result.data.login);\n      props.history.push('/');\n    },\n\n    onError(err) {\n      handleShow();\n      console.log(values);\n    },\n\n    variables: {\n      email: values.email,\n      password: values.password\n    }\n  });\n\n  function loginUserCallback() {\n    loginUser();\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Login Page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Welcome back! Log in below to begin.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: onSubmit,\n      noValidate: true,\n      children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n        controlId: \"email\",\n        children: /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"email\",\n          placeholder: \"Email\",\n          onChange: handleChange,\n          name: \"email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n        controlId: \"password\",\n        children: /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"password\",\n          placeholder: \"Password\",\n          onChange: handleChange,\n          name: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: valid,\n      onHide: handleClose,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Incorrect username or password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: \"Forgot your password?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleClose,\n          children: \" Forgot Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 9\n  }, this);\n}\n\n_s(LoginPage, \"+FBRHWYuarGQkGizQrkn8ck3BzY=\", false, function () {\n  return [useForm, useMutation];\n});\n\n_c = LoginPage;\nconst LOGIN_USER = gql`\n    mutation login(\n        $email: String!\n        $password: String!\n    ) {\n        login(\n            email: $email\n            password: $password\n        ) {\n            username\n            token\n        }\n     }\n `;\nexport default LoginPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginPage\");","map":{"version":3,"sources":["/Users/darrenjiang/Desktop/brainiac Client/src/pages/LoginPage.js"],"names":["React","useContext","useState","Form","Button","Modal","useMutation","gql","AuthContext","useForm","LoginPage","props","context","errors","setErrors","valid","validate","handleChange","onSubmit","values","loginUserCallback","email","password","handleClose","handleShow","loginUser","loading","LOGIN_USER","update","proxy","result","console","log","login","data","history","push","onError","err","variables"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from 'react';\nimport {Form, Button, Modal} from 'react-bootstrap';\nimport { useMutation } from '@apollo/client';\nimport gql from 'graphql-tag'\nimport { AuthContext } from '../context/auth'\n\nimport  { useForm } from '../util/hooks';\n\n\nfunction LoginPage(props) { \n    const context = useContext(AuthContext);\n    const [ errors, setErrors ] = useState({});\n    const [valid, validate] = useState(false);\n    const { handleChange, onSubmit, values } = useForm(loginUserCallback, {\n        email: '',\n        password: ''\n    }) \n    const handleClose = () => validate(false);\n    const handleShow = () => validate(true);\n\n    const [loginUser, {loading}] = useMutation(LOGIN_USER, {\n        update(proxy, result) {\n            console.log(result);\n            context.login(result.data.login);\n            props.history.push('/');\n         },\n        onError(err) {\n            handleShow();\n            console.log(values)\n        },\n        variables: {\n            email: values.email,\n            password: values.password\n        }\n    })\n\n    function loginUserCallback() {\n        loginUser()\n    }\n\n    \n    return (\n        <div className=\"form-container\">\n            <h1>Login Page</h1>\n            <p>Welcome back! Log in below to begin.</p>\n            <Form onSubmit={onSubmit} noValidate>\n                <Form.Group controlId=\"email\">\n                    {/* <Form.Label>Email address</Form.Label> */}\n                    <Form.Control \n                    type=\"email\" \n                    placeholder=\"Email\" \n                    onChange = {handleChange}\n                    name = \"email\"/>\n                    {/* <Form.Text className=\"text-muted\">\n                    We'll never share your email with anyone else.\n                    </Form.Text> */}\n                </Form.Group>\n\n                 <Form.Group controlId=\"password\">\n                     {/* <Form.Label>Password</Form.Label> */}\n                     <Form.Control type=\"password\" \n                    placeholder=\"Password\"\n                    onChange = {handleChange}\n                    name = \"password\"/>\n                </Form.Group>\n                {/* <Form.Group controlId=\"formBasicCheckbox\">\n                    <Form.Check type=\"checkbox\" label=\"Check me out\" />\n                </Form.Group> */}\n                <Button variant=\"primary\" type=\"submit\">\n                    Login\n                </Button>\n            </Form>\n            <Modal show={valid} onHide={handleClose}>\n                <Modal.Header closeButton>\n                    <Modal.Title>Incorrect username or password</Modal.Title>\n                </Modal.Header>\n                <Modal.Body>\n                    Forgot your password?\n                </Modal.Body>\n                <Modal.Footer>\n                    <Button variant=\"primary\" onClick = {handleClose}> Forgot Password</Button>\n                </Modal.Footer>\n            </Modal>\n        </div>\n    );\n}\n\nconst LOGIN_USER = gql`\n    mutation login(\n        $email: String!\n        $password: String!\n    ) {\n        login(\n            email: $email\n            password: $password\n        ) {\n            username\n            token\n        }\n     }\n `\n\nexport default LoginPage;"]},"metadata":{},"sourceType":"module"}